{% extends "invitation/base.html" %}
{% load static i18n %}

{% block title %}{% trans "Our Wedding Invitation" %}{% endblock %}

{% block extra_head %}
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Allura&display=swap" rel="stylesheet">
    <style>
        body {
            background: url('{% static "background_image.png" %}') left center repeat;
            color: #d6336c;
            font-family: 'Segoe UI', sans-serif;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 850px;
            margin: 40px auto;
            background: rgba(255,255,255,0.8);
            border-radius: 16px;
            box-shadow: 0 2px 8px rgba(214,51,108,0.08);
            padding: 32px;
            text-align: center;
            position: relative;
            overflow: visible;
        }
        h1 {
            color: #b8860b; /* dark gold for invitation header */
            font-size: 3em;
            font-family: 'Dancing Script', cursive !important;
            font-weight: 700 !important;
            letter-spacing: 1px;
            margin-bottom: 0.2em;
        }
        h2 {
            color: #000;
            font-size: 3.5em !important;
            font-family: 'Allura', cursive;
            font-style: normal;
            font-weight: 500;
            letter-spacing: 0.5px;
            margin-bottom: 1em;
        }
        .wedding-title {
            font-family: 'Felix Titling', serif !important;
        }
        .wedding-title .amp {
            font-size: 0.8em;
            display: inline-block;
        }
        .btn {
            background: linear-gradient(135deg, #f783ac 0%, #d6336c 100%);
            color: #fff;
            border: none;
            padding: 12px 32px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(214,51,108,0.2);
            transition: transform 0.2s, box-shadow 0.2s;
            font-size: 1em;
            cursor: pointer;
            text-decoration: none;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(214,51,108,0.3);
        }
        .svg-heart {
            width: 180px;
            height: 180px;
            cursor: pointer;
            animation: pulse 1s infinite;
            display: block;
            margin: 0 auto 24px auto;
        }
        .venue {
            margin-top: 32px;
            color: #d6336c;
            font-size: 1.1em;
        }
        .christian-symbol {
            margin: 0 auto 16px auto;
            display: block;
            width: auto;
            height: 156px;
        }
        .bible-verse {
            border-radius: 1.5rem;
            background-color: #629685; /* jade green color */
            background-blend-mode: multiply;
            box-shadow: 0 2px 12px rgba(214,51,108,0.08);
            padding: 24px;
            min-height: 240px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            position: relative;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(.25,.8,.25,1);
            margin: 32px auto;
            color: #FFFFFF; /* darker text for wood background */
            font-size: 1.5em;
            font-style: italic;
            max-width: 740px;
            border: 1px solid #629685; /* brown border to match wood theme */
            background-position: center center;
            filter: brightness(1) saturate(1);
        }
        .bible-verse:hover {
            transform: scale(1.05);
            filter: brightness(1.15);
            background-position: center bottom;
        }
        .bible-verse-header {
            font-size: 1.1em;
            font-weight: bold;
            color: #FFFFFF; /* dark brown header text */
            margin-bottom: 10px;
            letter-spacing: 0.5px;
        }
        .bible-verse-ref {
            display: block;
            margin-top: 12px;
            font-size: 1em;
            color: #FFFFFF; /* medium brown for reference */
            font-weight: 500;
            align-self: flex-end;
        }
        .venue-photo-art {
            position: absolute;
            right: -180px;
            top: 60px;
            width: 220px;
            height: 160px;
            border-radius: 24px 80px 24px 80px/80px 24px 80px 24px;
            box-shadow: 0 8px 32px rgba(214,51,108,0.18), 0 1px 24px #fff0f6;
            object-fit: cover;
            border: 6px solid #fff0f6;
            transform: rotate(8deg) scale(1.04);
            filter: brightness(1.08) saturate(1.15) drop-shadow(0 0 18px #f783ac88);
            z-index: 2;
            transition: transform 0.5s cubic-bezier(.7,-0.5,.3,1.5);
        }
        .venue-photo-art:hover {
            transform: rotate(0deg) scale(1.08);
            box-shadow: 0 16px 48px rgba(214,51,108,0.28);
            filter: brightness(1.15) saturate(1.25) drop-shadow(0 0 32px #f783acbb);
        }
        .couple-photo-art {
            position: absolute;
            left: -180px;
            top: 60px;
            width: 220px;
            height: 160px;
            border-radius: 80px 24px 80px 24px/24px 80px 24px 80px;
            box-shadow: 0 8px 32px rgba(214,51,108,0.18), 0 1px 24px #fff0f6;
            object-fit: cover;
            border: 6px solid #fff0f6;
            transform: rotate(-8deg) scale(1.10);
            filter: brightness(1.08) saturate(1.15) drop-shadow(0 0 18px #f783ac88);
            z-index: 2;
            transition: transform 0.5s cubic-bezier(.7,-0.5,.3,1.5);
        }
        .couple-photo-art:hover {
            transform: rotate(0deg) scale(1.10);
            box-shadow: 0 16px 48px rgba(214,51,108,0.28);
            filter: brightness(1.15) saturate(1.25) drop-shadow(0 0 32px #f783acbb);
        }
        .venue-photo-art,
        .couple-photo-art {
            transition: box-shadow 0.5s cubic-bezier(.7,-0.5,.3,1.5),
                        transform 0.5s cubic-bezier(.7,-0.5,.3,1.5),
                        filter 0.5s cubic-bezier(.7,-0.5,.3,1.5);
        }
        .venue-photo-art:hover,
        .couple-photo-art:hover {
            box-shadow: 0 16px 48px rgba(214,51,108,0.28);
            transform: scale(1.10) rotate(0deg);
            filter: brightness(1.15) saturate(1.25) drop-shadow(0 0 32px #f783acbb);
        }
        .how-to-card {
            margin: 48px auto 0 auto;
            max-width: 800px;
            width: 100%;
            background: linear-gradient(135deg, #fff0f6 60%, #fff0f6 100%);
            border-radius: 1.5rem;
            box-shadow: 0 2px 12px rgba(214,51,108,0.08);
            padding: 24px;
            color: #243c5a;
            font-size: 1.15em;
            font-style: normal;
            border: 1px solid #629685;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(.25,.8,.25,1);
            text-align: center;
        }
        .how-to-card:hover {
            box-shadow: 0 8px 24px rgba(214,51,108,0.16);
            transform: scale(1.03);
        }
        .how-to-card .bible-verse-header {
            font-size: 1.8em;
            font-weight: bold;
            color: #629685; /* updated to jade/nav color */
            margin-bottom: 10px;
            letter-spacing: 0.5px;
        }
        .event-details-card {
            background: #fff;
            border-radius: 1.5rem;
            box-shadow: 0 2px 12px rgba(214,51,108,0.08);
            padding: 40px;
            margin: 32px auto;
            color: #243c5a;
            font-size: 1.15em;
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 18px;
            max-width: 700px;
            min-height: 220px;
            text-align: left;
            border: 1px solid #629685;
        }
        .event-details-card span.lang-en {
            font-size: 1.00em;
        }
        .event-details-card strong {
            font-size: 1em;
            font-weight: bold;
            color: #243c5a;
        }
        .event-details-card span {
            font-size: 1.1em;
            color: #243c5a;
        }
        .event-details-card span:first-child {
            font-size: 1.3rem;
        }
        .map-card {
            margin-top: 32px;
            padding: 24px;
            background: #243c5a;
            border-radius: 16px;
            box-shadow: 0 2px 12px rgba(36,60,90,0.18);
            text-align: center;
            border: none;
        }
        .map-card .map-img {
            border: none;
        }
        .couple-photo-art, .venue-photo-art {
            max-width: 380px;
            width: 100%;
            height: auto;
            border-radius: 16px;
            box-shadow: 0 2px 12px rgba(36,60,90,0.12);
            margin-bottom: 16px;
        }
        .btn.rsvp-btn {
            background: gold;
            color: #243c5a;
            border: 2px solid #e6b800;
            font-size: 1.4em;
            padding: 18px 48px;
            font-weight: bold;
            box-shadow: 0 2px 8px rgba(230,184,0,0.18);
            display: inline-block;
            transition: box-shadow 0.3s, transform 0.3s, background 0.3s, color 0.3s;
        }
        .btn.rsvp-btn:hover {
            background: #ffe066;
            color: #d6336c;
            box-shadow: 0 8px 24px rgba(230,184,0,0.28);
            transform: scale(1.08) rotate(-2deg);
            border-color: #FFD700;
        }
        .info-card {
            background: #d6336c;  /* red envelope body */
            color: #243c5a;    /* dark text color */
            border: 1px solid #f783ac;
            border-radius: 1.5rem;
            box-shadow: 0 2px 12px rgba(36,60,90,0.18);
            padding: 24px;
            margin: 32px auto;
            font-size: 1.15em;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            overflow: hidden; /* clip flap inside card */
            max-width: 700px;
            width: 100%;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .info-card p, .info-card a {
            color: #243c5a;  /* dark text links */
        }
        /* Envelope flap */
        .info-card::before {
            content: "";
            position: absolute;
            top: 0; /* place flap inside top of card */
            left: 0;
            width: 100%;
            height: 200px;  /* increase flap depth */
            background: #f783ac;  /* gold flap */
            clip-path: polygon(0 0, 50% 100%, 100% 0); /* downward-pointing triangle */
            z-index: 1;
            transform-origin: top center;
            transition: transform 0.3s ease;
        }
        /* make RSVP button stack above flap */
        .info-card .btn.rsvp-btn {
            position: relative;
            z-index: 2;
        }
        .info-card:hover {
            transform: scale(1.03);
            box-shadow: 0 8px 24px rgba(36,60,90,0.28);
        }
        .info-card:hover::before {
            transform: translateY(-150px) rotateX(15deg);
        }
        .event-details-card:hover {
            transform: scale(1.03);
        }
        /* Reduce decorative divider size on home page */
        @media (max-width: 768px) {
            .couple-photo-art,
            .venue-photo-art {
                position: static;
                width: 90%;
                max-width: 320px;
                height: auto;
                margin: 16px auto;
            }
            .side-images {
                display: flex !important;
                flex-direction: column;
                gap: 16px;
            }
        }
        /* Hover effect for venue image on homepage */
        .venue-photo-hover {
            transition: transform 0.3s ease, filter 0.3s ease;
            cursor: pointer;
        }
        .venue-photo-hover:hover {
            transform: scale(1.10);
            filter: brightness(1.1);
        }
    </style>
    <style>
        .petal {
            position: fixed;
            top: -50px;
            z-index: 3;
            pointer-events: none;
            width: 30px;
            height: 30px;
            background-image: url('{% static "sakura_petal.png" %}');
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 0.8;
            animation: fall linear infinite;
        }
        @keyframes fall {
            0%   { transform: translateX(0) translateY(-50px) rotateZ(0deg); }
            50%  { transform: translateX(50px) translateY(50vh) rotateZ(180deg); }
            100% { transform: translateX(0) translateY(110vh) rotateZ(360deg); }
        }
    </style>
{% endblock %}

{% block content %}
    <img src="{% static 'cross.png' %}" alt="{% trans 'Christian Cross' %}" class="christian-symbol" />
    <div class="bible-verse">
        <div class="bible-verse-header">
            {% trans "A Message of Love" %}
        </div>
        <p>
            {% trans "Love is patient, love is kind. It does not envy, it does not boast, it is not proud. It does not dishonor others, it is not self-seeking, it is not easily angered, it keeps no record of wrongs. Love does not delight in evil but rejoices with the truth. It always protects, always trusts, always hopes, always perseveres." %}
        </p>
        <div class="bible-verse-ref">
            {% trans "1 Corinthians 13:4-7" %}
        </div>
    </div>
    <div class="decorative-divider"></div>
    <img class="svg-heart" src="{% static 'heart.gif' %}" alt="{% trans 'Heart' %}" title="{% trans 'Click the heart!' %}" />
    <h1>{% trans "You're Invited to the Wedding of" %}</h1>
    <h2 class="wedding-title" style="text-align: center">
        {% trans "Joel Ng" %}<br><span class="amp">&</span><br>
        {% trans "Amanda Lim" %}
    </h2>
    <img src="{% static 'official_couple_pic.jpg' %}" alt="{% trans 'Couple Photo' %}" class="couple-photo-art" style="position: static !important; width: 70% !important; max-width: 560px; height: auto !important; transform: none !important; filter: none !important; margin: 20px auto; display: block;"/>
    <div class="decorative-divider"></div>
    <div style="display:flex; flex-direction:column; align-items:center; gap:32px; margin:32px 0;">
        <img src="{% static 'vfc.png' %}" alt="{% trans 'Venue Photo' %}" class="venue-photo-hover" style="margin:20px auto; display:block; max-width:70%; height:auto;" />
        <div class="event-details-card">
            <div><span>üìç</span> <span><strong>{% trans "Venue:" %}</strong> {% trans "Victory Family Centre Tampines (Level 3)" %}</span></div>
            <div><span>‚õ™</span> <span><strong>{% trans "Address:" %}</strong> {% trans "20 Tampines Street 43, Singapore 529151" %}</span></div>
            <div><span>üìÖ</span> <span><strong>{% trans "Date:" %}</strong> {% trans "November 29 (Saturday)" %}</span></div>
            <div><span>‚è∞</span> <span><strong>{% trans "Registration Time:" %}</strong> {% trans "10:30 AM" %}</span></div>
            <div><span>üëî</span> <span><strong>{% trans "Dress Code:" %}</strong> {% blocktrans %}Smart Casual (Kindly dress modestly‚Äîlong pants or jeans for men, and long skirts or dresses for women; no shorts or revealing clothing. Covered shoes){% endblocktrans %}</span></div>
            <div><span>ü•©</span> <span><strong>{% trans "Food:" %}</strong> {% trans "8-Course Buffet Lunch and Pastries" %}</span></div>
        </div>
        <div class="decorative-divider"></div>
        <div class="bible-verse how-to-card" style="position:relative; min-height:340px; background:#fff;">
            <div class="bible-verse-header">
                {% trans "How to Get There?" %}
            </div>
            <div style="margin-bottom:24px; position:relative; z-index:2;">
                {% trans "Victory Family Centre Tampines is easily accessible by public transport and car." %}
            </div>
            <div style="display:flex; justify-content:space-between; align-items:flex-start; width:100%; position:relative; z-index:2; gap:16px; margin-bottom:36px;">
                <div style="display:flex; flex-direction:column; align-items:center; text-align:center; max-width:220px; width:33%;">
                    <span style="font-size:1.2em; margin-bottom:4px;">üöá</span><strong>{% trans "By MRT:" %}</strong><br/>
                    <span style="font-size:0.98em;">{% trans "Take the Downtown Line to Tampines East MRT (DT33). Walk 8 minutes to the church." %}</span>
                </div>
                <div style="display:flex; flex-direction:column; align-items:center; text-align:center; max-width:220px; width:33%;">
                    <span style="font-size:1.2em; margin-bottom:4px;">üöå</span><strong>{% trans "By Bus:" %}</strong><br/>
                    <span style="font-size:0.98em;">{% trans "Bus services 8, 18, 28, 29, 37, 291, 293 stop nearby." %}</span>
                </div>
                <div style="display:flex; flex-direction:column; align-items:center; text-align:center; max-width:260px; width:33%;">
                    <span style="font-size:1.2em; margin-bottom:4px;">üöó</span><strong>{% trans "By Car:" %}</strong><br/>
                    <span style="font-size:0.98em;">{% blocktrans %}Free parking available at the church carpark (reserve beforehand).<br/>There are HDB carparks nearby as well.{% endblocktrans %}</span>
                </div>
            </div>
            <div style="display:flex; justify-content:center; width:100%; position:absolute; left:0; bottom:18px;">
                <a href="https://maps.app.goo.gl/Zsk9YoVdJHuoQFTs5" target="_blank" class="btn">
                    {% trans "View on Google Maps" %}
                </a>
            </div>
        </div>
        <div class="map-card how-to-card" style="margin-top:16px; padding:10px; background:#629685; border-radius:5px; box-shadow:0 2px 12px rgba(214,51,108,0.12); text-align:center;">
            <img src="{% static 'map.png' %}" alt="{% trans 'Map to Victory Family Centre Tampines' %}" class="map-img" style="max-width:100%; border-radius:12px; box-shadow:0 2px 8px rgba(36,60,90,0.08);" />
        </div>
        <div class="decorative-divider"></div>
    </div>
    <div class="info-card">
        <p style="color: #fff;">
            You opened the Envelope of Love!
        </p>
        <p>
        </p>
        <div style="margin-top:32px; display: flex; flex-direction: column; gap: 16px; align-items: center;">
            <a href="{% url 'rsvp' %}" class="btn rsvp-btn">{% trans "RSVP Now" %}</a>
            <p style="margin: 16px 0 0 0; font-size: 1.08em; font-weight: 500; color: #fff;">
                {% trans "Check out our free gifts for you!" %}
            </p>
            <a href="{% url 'freebies' %}" class="btn" style="background: #f783ac; color: #fff; border: none; font-size: 1.1em; padding: 14px 40px; font-weight: bold; margin-top: 8px;">
                {% trans "Freebies" %}
            </a>
        </div>
    </div>
{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
<script>
  (function() {
    const envelope = document.querySelector('.info-card');
    if (envelope) {
      envelope.addEventListener('mouseenter', function() {
        confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
      });
    }
    function createPetals() {
      for (let i = 0; i < 30; i++) {
        const petal = document.createElement('div');
        petal.className = 'petal';
        petal.style.left = Math.random() * 100 + 'vw';
        const delay = Math.random() * 5;
        const duration = 7 + Math.random() * 5;
        petal.style.animationDelay = delay + 's';
        petal.style.animationDuration = duration + 's';
        document.body.appendChild(petal);
      }
    }
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', createPetals);
    } else {
      createPetals();
    }
  })();
</script>
{% endblock %}
